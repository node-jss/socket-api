var dataCapcha = null, getURLParameter = function(e) {for (var a = window.location.search.substring(1), s = a.split("&"), r = 0; r < s.length; r++) {var t = s[r].split("="); if (t[0] == e) return decodeURIComponent(t[1]) } }, ref = getURLParameter("affiliate"); "undefined" != typeof ref && ($("body").hide(), localStorage.setItem("ref", ref), location.href = "/"); localStorage.getItem("ref") !== null && ($('#sponser').show(), $('#sponser span').html(localStorage.getItem("ref")) ); var recaptchaCallback = function() {$(".login-page-right > img").css({width: $("#Login-page .login-page-right").width(), height: $("#Login-page .bg-whilet").height() }), $("#Register-page #frmRegister > img").css({width: $("#frmRegister").width(), height: $("#frmRegistert").height() }), setTimeout(function() {$("#Register-page #frmRegister > img").hide(), $(".login-page-right > img").hide() }, 500); var e = function() {$(".error-box").hide(), $(".form-group").removeClass("has-error") }, a = function(a, s, r, t, o) {$.ajax({url: "/signUp", type: "POST", data: {user: a, email: s, password: r, cfpassword: t, Sponsor: null === localStorage.getItem("ref") ? "" : localStorage.getItem("ref"), ggcaptcha: o }, cache: !1, beforeSend: function() {e(), $("#Register-page #frmRegister > img").show() }, success: function(e) {location.href = "/register-success"}, error: function(e) {grecaptcha.reset(), $("#Register-page #frmRegister > img").hide(), 403 === e.status && _.each(e.responseJSON.message, function(e, a) {"displayName" === e.param && ($("#user + span").show().text(e.msg), $(".user").addClass("has-error")), "email" === e.param && ($("#email + span").show().text(e.msg), $(".email").addClass("has-error")), "password" === e.param && ($("#password + span").show().text(e.msg), $(".password").addClass("has-error"), $("#re-password + span").show().text(e.msg), $(".re-password").addClass("has-error")) }), 401 === e.status && _.each(e.responseJSON.message, function(e, a) {"displayName" === e.param && ($("#user + span").show().text(e.msg), $(".user").addClass("has-error")), "email" === e.param && ($("#email + span").show().text(e.msg), $(".email").addClass("has-error")), "password" === e.param && ($("#password + span").show().text(e.msg), $(".password").addClass("has-error"), $("#re-password + span").show().text(e.msg), $(".re-password").addClass("has-error")) }) } }) }; $("#frmRegister").on("submit", function(s) {e(); var r = $("#email").val(), t = $("#password").val(), o = $("#re-password").val(), i = $("#user").val(); return a(i, r, t, o, dataCapcha), !1 }), grecaptcha.render("recaptcha", {sitekey: "6LfTIDYUAAAAAIscAJ-qcY2EkCCZLfGK3O6FPnSj", callback: function(e) {dataCapcha = e } }) };