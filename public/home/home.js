var buy_sec=parseInt($('#buy_price_update_interval').val());var buy_sec_interval=buy_sec*1000;var site_url=front_url;$(document).ready(function(){var count=buy_sec;var counter=setInterval(timer,1000);function timer()
{count=count-1;if(count<=0)
{clearInterval(counter);return;}
$('#buy_timer').html(count);}});$('#choose_buy_fiat').change(function(){$(':button[type="submit"]').prop('disabled',true);var value=$(this).val();$.get(site_url+"common/get_secondcurrency/"+value,function(balance){$("#choose_buy_crypto").html(balance);}).done(function(){$.get(site_url+"exchange/get_fiatcurrencydetails/"+value,function(details){var details=JSON.parse(details);$('#currency_1').html(details.currency_sign);$('#currency_2').html(details.currency_sign);$('#currency_3').html(details.currency_sign);$('#currency_4').html(details.currency_sign);$('#manual_buy_price').attr("placeholder",details.currency_symbol);});var secondcurrency=$("#choose_buy_crypto option:first").val();$('#selected_buy_crypto').val($("#choose_buy_crypto option:first").val());autobuy();});$('#manual_buy_price').val('');$('#manual_buy_amount').val('');$('#selected_buy_fiat').val(value);});function autobuy()
{$(':button[type="submit"]').prop('disabled',true);var value=$('#selected_buy_crypto').val();$.get(site_url+"exchange/get_cryptocurrencydetails/"+value,function(details){var details=JSON.parse(details);$('#crypto_currency_1').html(details.currency_symbol);$('#crypto_currency_2').html(details.currency_symbol);$('#crypto_currency_3').html(details.currency_symbol);$('#crypto_currency_4').html(details.currency_symbol);$('#manual_buy_amount').attr("placeholder",details.currency_symbol);});$('#selected_buy_crypto').val(value);var firstcurrency=$('#selected_buy_fiat').val();$.get(site_url+"exchange/get_fees/"+firstcurrency+"/"+value,function(fees){var fees=JSON.parse(fees);var final_fees=fees.fees;var final_fees_type=fees.fees_type;$('#buy_fees').val(final_fees);$('#buy_fees_type').val(final_fees_type);$('#minval_from_currency').val(fees.minval_from_currency);$('#maxval_from_currency').val(fees.maxval_from_currency);});$('#manual_buy_price').val('');$('#manual_buy_amount').val('');buypricecalc();}
$('#choose_buy_crypto').change(function(){$(':button[type="submit"]').prop('disabled',true);var value=$(this).val();$.get(site_url+"exchange/get_cryptocurrencydetails/"+value,function(details){var details=JSON.parse(details);$('#crypto_currency_1').html(details.currency_symbol);$('#crypto_currency_2').html(details.currency_symbol);$('#crypto_currency_3').html(details.currency_symbol);$('#crypto_currency_4').html(details.currency_symbol);$('#manual_buy_amount').attr("placeholder",details.currency_symbol);});$('#selected_buy_crypto').val(value);var firstcurrency=$('#selected_buy_fiat').val();$.get(site_url+"exchange/get_fees/"+firstcurrency+"/"+value,function(fees){var fees=JSON.parse(fees);var final_fees=fees.fees;var final_fees_type=fees.fees_type;$('#buy_fees').val(final_fees);$('#buy_fees_type').val(final_fees_type);$('#minval_from_currency').val(fees.minval_from_currency);$('#maxval_from_currency').val(fees.maxval_from_currency);});$('#manual_buy_price').val('');$('#manual_buy_amount').val('');buypricecalc();});function buynow(id){var id=id;$('#buy_id').val(id);}
function manualbuynow(id)
{var id=id;if(id=='5')
{$('#offer_buys').validate({rules:{manual_buy_amount:{required:true,number:true,min:0.0005,},manual_buy_price:{required:true,number:true,min:function(){return parseFloat($('#minval_from_currency').val());},max:function(){return parseFloat($('#maxval_from_currency').val());},},},messages:{manual_buy_price:{required:"Please enter the price",number:"Price must be a valid numbers",min:function(){return"Price must be greater than or equal to "+parseFloat($('#minval_from_currency').val());},max:function(){return"Price must be less than or equal to "+parseFloat($('#maxval_from_currency').val());},},manual_buy_amount:{required:"Please enter the amount",number:"Amount must be a valid numbers",min:"Amount must be greater than 0.0005",},},});}
$('#buy_ids').val(id);$('#selected_buy_fiats').val($('#selected_buy_fiat').val());$('#selected_buy_cryptos').val($('#selected_buy_crypto').val());$('#buy_responses').val($('#buy_response').val());$('#user_buy_balances').val($('#user_buy_balance').val());$('#buy_feess').val($('#buy_fees').val());$('#buy_fees_types').val($('#buy_fees_type').val());$('#buy_fees_types').val($('#buy_fees_type').val());$('#types').val($('#type').val());}
function manual_calcprice(){var convertfrom=$('#selected_buy_fiat').val();var convertto=$('#selected_buy_crypto').val();var response=$('#buy_response').val();if(document.getElementById("manual_buy_amount").value!=''){var manual_buy_amount_without_fees=parseFloat(document.getElementById("manual_buy_amount").value)/parseFloat(response);var buy_fees=parseFloat($('#buy_fees').val());var buy_fees_type=$('#buy_fees_type').val();var price_fee=parseFloat(manual_buy_amount_without_fees);if(buy_fees_type=='percent'||buy_fees_type=='Percent'){var fees=parseFloat((price_fee*buy_fees)/100);}
else{var fees=parseFloat(buy_fees);}
var manual_buy_amount=parseFloat(manual_buy_amount_without_fees)+parseFloat(fees);$('#manual_buy_price').val(manual_buy_amount.toFixed(2));}
else{$('#manual_buy_price').val('');}}
function manual_calcamount(){var convertfrom=$('#selected_buy_fiat').val();var convertto=$('#selected_buy_crypto').val();var response=$('#buy_response').val();if(document.getElementById("manual_buy_price").value!=''){var buy_fees=parseFloat($('#buy_fees').val());var buy_fees_type=$('#buy_fees_type').val();var price_fee=parseFloat(document.getElementById("manual_buy_price").value);if(buy_fees_type=='percent'||buy_fees_type=='Percent'){var fees=parseFloat((price_fee*buy_fees)/100);}
else{var fees=parseFloat(buy_fees);}
var manual_buy_price=(parseFloat(document.getElementById("manual_buy_price").value)-fees)*parseFloat(response);$('#manual_buy_amount').val(manual_buy_price.toFixed(8));}
else{$('#manual_buy_amount').val('');}}
function manual_buynow(){var price=parseFloat($('#manual_buy_price').val());var amount=parseFloat($('#manual_buy_amount').val());alert(price+amount);}
function alertbuytimer(){var count=buy_sec;var counter=setInterval(timer,1000);function timer()
{count=count-1;if(count<=0)
{clearInterval(counter);return;}
$('#buy_timer').html(count);}}
function buypricecalc(){$(':button[type="submit"]').prop('disabled',true);var convertfrom=$('#selected_buy_fiat').val();var convertto=$('#selected_buy_crypto').val();var buy_user_id=$('#buy_user_id').val();$.get(site_url+"common/buyconvercurr/"+convertfrom+"/"+convertto,function(response){var response=parseFloat(response);$.get(site_url+"common/get_buy_ofer/"+convertfrom+"/"+convertto,function(offer_amount){var offer_amount=JSON.parse(offer_amount);$('#buy_offer_price_1').html(offer_amount.buy_offer_1);$('#buy_offer_price_2').html(offer_amount.buy_offer_2);$('#buy_offer_price_3').html(offer_amount.buy_offer_3);$('#buy_offer_price_4').html(offer_amount.buy_offer_4);var buy_fees=$('#buy_fees').val();var buy_fees_type=$('#buy_fees_type').val();if(buy_fees_type=='percent'||buy_fees_type=='Percent'){var fees_1=parseFloat((offer_amount.buy_offer_1*buy_fees)/100);var fees_2=parseFloat((offer_amount.buy_offer_2*buy_fees)/100);var fees_3=parseFloat((offer_amount.buy_offer_3*buy_fees)/100);var fees_4=parseFloat((offer_amount.buy_offer_4*buy_fees)/100);}
else{var fees_1=parseFloat(buy_fees);var fees_2=parseFloat(buy_fees);var fees_3=parseFloat(buy_fees);var fees_4=parseFloat(buy_fees);}
var buy_offer_amount_1=(offer_amount.buy_offer_1-fees_1)*parseFloat(response);var buy_offer_amount_2=(offer_amount.buy_offer_2-fees_2)*parseFloat(response);var buy_offer_amount_3=(offer_amount.buy_offer_3-fees_3)*parseFloat(response);var buy_offer_amount_4=(offer_amount.buy_offer_4-fees_4)*parseFloat(response);$('#buy_offer_amount_1').html(buy_offer_amount_1.toFixed(8));$('#buy_offer_amount_2').html(buy_offer_amount_2.toFixed(8));$('#buy_offer_amount_3').html(buy_offer_amount_3.toFixed(8));$('#buy_offer_amount_4').html(buy_offer_amount_4.toFixed(8));$('#buy_response').val(response.toFixed(12));$.get(site_url+"exchange/get_balance/"+buy_user_id+"/"+convertfrom+"/"+"fiat",function(balance){var balance=parseFloat(balance);$('#user_buy_balance').val(balance.toFixed(2));}).done(function(){$(':button[type="submit"]').prop('disabled',false);});});});}
var sell_sec=parseInt($('#sell_price_update_interval').val());var sell_sec_interval=sell_sec*1000;$(document).ready(function(){var counts=sell_sec;var counters=setInterval(timers,1000);function timers()
{counts=counts-1;if(counts<=0)
{clearInterval(counters);return;}
$('#sell_timer').html(counts);}});$('#choose_sell_crypto').change(function(){$(':button[type="submit"]').prop('disabled',true);var value=$(this).val();$.get(site_url+"common/get_sell_secondcurrency/"+value,function(balance){$("#choose_sell_fiat").html(balance);}).done(function(){$.get(site_url+"exchange/get_cryptocurrencydetails/"+value,function(details){var details=JSON.parse(details);$('#sell_crypto_currency_1').html(details.currency_symbol);$('#sell_crypto_currency_2').html(details.currency_symbol);$('#sell_crypto_currency_3').html(details.currency_symbol);$('#sell_crypto_currency_4').html(details.currency_symbol);$('#manual_sell_price').attr("placeholder",details.currency_symbol);});$('#selected_sell_fiat').val($("#choose_sell_fiat option:first").val());autosell();});$('#manual_sell_price').val('');$('#manual_sell_amount').val('');$('#selected_sell_crypto').val(value);});function autosell()
{$(':button[type="submit"]').prop('disabled',true);var value=$('#selected_sell_fiat').val();$.get(site_url+"exchange/get_fiatcurrencydetails/"+value,function(details){var details=JSON.parse(details);$('#manual_sell_amount').attr("placeholder",details.currency_symbol);$('#sell_currency_1').html(details.currency_sign);$('#sell_currency_2').html(details.currency_sign);$('#sell_currency_3').html(details.currency_sign);$('#sell_currency_4').html(details.currency_sign);});var secondcurrency=$('#selected_sell_crypto').val();$.get(site_url+"exchange/get_fees/"+value+"/"+secondcurrency,function(fees){var fees=JSON.parse(fees);var final_fees=fees.fees;var final_fees_type=fees.fees_type;$('#sell_fees').val(final_fees);$('#sell_fees_type').val(final_fees_type);$('#minval_to_currency').val(fees.minval_to_currency);$('#maxval_to_currency').val(fees.maxval_to_currency);});$('#manual_sell_price').val('');$('#manual_sell_amount').val('');$('#selected_sell_fiat').val(value);sellpricecalc();}
$('#choose_sell_fiat').change(function(){$(':button[type="submit"]').prop('disabled',true);var value=$(this).val();$.get(site_url+"exchange/get_fiatcurrencydetails/"+value,function(details){var details=JSON.parse(details);$('#manual_sell_amount').attr("placeholder",details.currency_symbol);$('#sell_currency_1').html(details.currency_sign);$('#sell_currency_2').html(details.currency_sign);$('#sell_currency_3').html(details.currency_sign);$('#sell_currency_4').html(details.currency_sign);});var secondcurrency=$('#selected_sell_crypto').val();$.get(site_url+"exchange/get_fees/"+value+"/"+secondcurrency,function(fees){var fees=JSON.parse(fees);var final_fees=fees.fees;var final_fees_type=fees.fees_type;$('#sell_fees').val(final_fees);$('#sell_fees_type').val(final_fees_type);$('#minval_to_currency').val(fees.minval_to_currency);$('#maxval_to_currency').val(fees.maxval_to_currency);});$('#manual_sell_price').val('');$('#manual_sell_amount').val('');$('#selected_sell_fiat').val(value);sellpricecalc();});function alertselltimer(){var count=sell_sec;var counter=setInterval(timer,1000);function timer()
{count=count-1;if(count<=0)
{clearInterval(counter);return;}
$('#sell_timer').html(count);}}
function sellpricecalc(){$(':button[type="submit"]').prop('disabled',true);var convertfrom=$('#selected_sell_crypto').val();var convertto=$('#selected_sell_fiat').val();var sell_user_id=$('#sell_user_id').val();$.get(site_url+"common/sellconvercurr/"+convertfrom+"/"+convertto,function(response){var response=parseFloat(response);$.get(site_url+"common/get_buy_ofer/"+convertto+"/"+convertfrom,function(offer_amount){var offer_amount=JSON.parse(offer_amount);$('#sell_offer_price_1').html(offer_amount.sell_offer_1);$('#sell_offer_price_2').html(offer_amount.sell_offer_2);$('#sell_offer_price_3').html(offer_amount.sell_offer_3);$('#sell_offer_price_4').html(offer_amount.sell_offer_4);var sell_offer_amount_1=offer_amount.sell_offer_1*parseFloat(response);var sell_offer_amount_2=offer_amount.sell_offer_2*parseFloat(response);var sell_offer_amount_3=offer_amount.sell_offer_3*parseFloat(response);var sell_offer_amount_4=offer_amount.sell_offer_4*parseFloat(response);$('#sell_offer_amount_1').html(sell_offer_amount_1.toFixed(2));$('#sell_offer_amount_2').html(sell_offer_amount_2.toFixed(2));$('#sell_offer_amount_3').html(sell_offer_amount_3.toFixed(2));$('#sell_offer_amount_4').html(sell_offer_amount_4.toFixed(2));$('#sell_response').val(response.toFixed(8));$.get(site_url+"exchange/get_balance/"+sell_user_id+"/"+convertfrom+"/"+"crypto",function(balance){var balance=parseFloat(balance);$('#user_sell_balance').val(balance.toFixed(8));}).done(function(){$(':button[type="submit"]').prop('disabled',false);});});});}
function sellnow(id){var id=id;$('#sell_id').val(id);}
function manualsellnow(id)
{var id=id;if(id=='5')
{$('#offer_sells').validate({rules:{manual_sell_amount:{required:true,number:true,min:0.0005,},manual_sell_price:{required:true,number:true,min:function(){return parseFloat($('#minval_to_currency').val());},max:function(){return parseFloat($('#maxval_to_currency').val());},},},messages:{manual_sell_price:{required:"Please enter the price",number:"Price must be a valid numbers",min:function(){return"Price must be greater than or equal to "+parseFloat($('#minval_to_currency').val());},max:function(){return"Price must be less than or equal to "+parseFloat($('#maxval_to_currency').val());},},manual_sell_amount:{required:"Please enter the amount",number:"Amount must be a valid numbers",min:"Amount must be greater than 0.0005",},},});}
$('#sell_ids').val(id);$('#selected_sell_fiats').val($('#selected_sell_fiat').val());$('#selected_sell_cryptos').val($('#selected_sell_crypto').val());$('#sell_responses').val($('#sell_response').val());$('#user_sell_balances').val($('#user_sell_balance').val());$('#sell_price_update_intervals').val($('#sell_price_update_interval').val());$('#sell_feess').val($('#sell_fees').val());$('#sell_fees_types').val($('#sell_fees_type').val());$('#types').val($('#type').val(id));}
function manual_sell_calcprice(){var convertfrom=$('#selected_sell_crypto').val();var convertto=$('#selected_sell_fiat').val();var response=$('#sell_response').val();if(document.getElementById("manual_sell_amount").value!=''){var manual_sell_amount=parseFloat(document.getElementById("manual_sell_amount").value)/parseFloat(response);$('#manual_sell_price').val(manual_sell_amount.toFixed(8));}
else{$('#manual_sell_price').val('');}}
function manual_sell_calcamount(){var convertfrom=$('#selected_sell_crypto').val();var convertto=$('#selected_sell_fiat').val();var response=$('#sell_response').val();if(document.getElementById("manual_sell_price").value!=''){var manual_sell_price=parseFloat(document.getElementById("manual_sell_price").value)*parseFloat(response);$('#manual_sell_amount').val(manual_sell_price.toFixed(8));}
else{$('#manual_sell_amount').val('');}}
function manual_sellnow(){var price=parseFloat($('#manual_sell_price').val());var amount=parseFloat($('#manual_sell_amount').val());alert(price+amount);}
function isNumberKey(evt){var charCode=(evt.which)?evt.which:event.keyCode
if(charCode>31&&(charCode<46||charCode>57))
return false;return true;}